<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hysena - Engineering Effort Estimation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica', Arial, sans-serif;
            background: linear-gradient(to bottom, #edf4f5, #f7fbfc);
            min-height: 100vh;
            color: #101010;
        }

        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #00b5eb, #e03466);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }

        .brand-name {
            font-size: 20px;
            font-weight: 700;
            color: #111827;
            letter-spacing: -0.5px;
        }

        .nav-items {
            display: flex;
            gap: 32px;
            align-items: center;
        }

        .nav-link {
            color: #6b7280;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.2s ease;
        }

        .nav-link:hover {
            color: #111827;
        }

        .nav-button {
            padding: 8px 16px;
            background: linear-gradient(135deg, #00b5eb, #e03466);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .nav-button:hover {
            transform: scale(1.05);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .user-avatar:hover {
            background: #e5e7eb;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .hero {
            text-align: center;
            margin-bottom: 60px;
        }

        h1 {
            font-size: 48px;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #00b5eb 0%, #e03466 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 20px;
            color: #6b7280;
            font-weight: 400;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.5;
        }

        .tickets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .ticket-card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .ticket-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
            border-color: #00b5eb;
        }

        .ticket-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .issue-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #33b73b;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        .issue-number {
            color: #6b7280;
            font-size: 14px;
        }

        .ticket-title {
            font-size: 18px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .ticket-meta {
            display: flex;
            gap: 16px;
            font-size: 14px;
            color: #6b7280;
        }

        .repo-name {
            font-weight: 500;
            color: #4b5563;
        }

        .label {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            margin-top: 12px;
        }

        .label-bug {
            background: #ffe4e4;
            color: #ff4136;
        }

        .label-enhancement {
            background: #e8f7fc;
            color: #00b5eb;
        }

        .label-feature {
            background: #e8f9e9;
            color: #33b73b;
        }

        .chat-container {
            display: none;
            background: white;
            border-radius: 16px;
            border: 1px solid #e5e7eb;
            height: 600px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .chat-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
            background: #f7fbfc;
        }

        .chat-title {
            font-size: 16px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 4px;
        }

        .chat-subtitle {
            font-size: 14px;
            color: #6b7280;
        }

        .chat-messages {
            padding: 24px;
            height: calc(100% - 160px);
            overflow-y: auto;
        }

        .message {
            margin-bottom: 24px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-ai {
            display: flex;
            gap: 12px;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: linear-gradient(135deg, #00b5eb, #e03466);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            flex-shrink: 0;
        }

        .message-content {
            flex: 1;
        }

        .message-text {
            background: #f3f4f6;
            border-radius: 12px;
            padding: 12px 16px;
            line-height: 1.5;
            color: #111827;
        }

        .effort-box {
            background: linear-gradient(135deg, #00b5eb, #e03466);
            color: white;
            padding: 16px;
            border-radius: 12px;
            margin-top: 12px;
            display: inline-block;
        }

        .effort-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 4px;
        }

        .effort-value {
            font-size: 28px;
            font-weight: 700;
        }

        .chat-input {
            padding: 20px 24px;
            border-top: 1px solid #e5e7eb;
            background: #f7fbfc;
        }

        .input-wrapper {
            display: flex;
            gap: 12px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            transition: border 0.3s ease;
        }

        .chat-input input:focus {
            border-color: #00b5eb;
        }

        .send-button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #00b5eb, #e03466);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .send-button:hover {
            transform: scale(1.05);
        }

        .send-button:active {
            transform: scale(0.98);
        }

        .back-button {
            display: none;
            margin-bottom: 24px;
            padding: 10px 20px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            color: #6b7280;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            border-color: #00b5eb;
            color: #00b5eb;
        }

        .typing-indicator {
            display: none;
            padding: 8px 16px;
            background: #f3f4f6;
            border-radius: 12px;
            display: inline-flex;
            gap: 4px;
            align-items: center;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: #9ca3af;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .typing-indicator span:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }

        .tech-note {
            margin-top: 40px;
            padding: 20px;
            background: #f7fbfc;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            font-size: 14px;
            color: #174c76;
            text-align: center;
        }

        .tech-note strong {
            color: #174c76;
            font-weight: 700;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo">H</div>
                <div class="brand-name">Hysena</div>
            </div>
            <nav class="nav-items">
                <a href="#" class="nav-link">Dashboard</a>
                <a href="#" class="nav-link">Estimations</a>
                <a href="#" class="nav-link">Integrations</a>
                <a href="#" class="nav-link">Documentation</a>
                <button class="nav-button">Connect GitHub</button>
                <div class="user-avatar">JD</div>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="hero">
            <h1>Get engineering effort estimates in seconds</h1>
            <p class="subtitle">not in bi-weekly triage meetings. Choose a ticket and understand what needs to change and how long it will take.</p>
        </div>

        <button class="back-button" id="backButton" onclick="showTickets()">← Back to tickets</button>

        <div class="tickets-grid" id="ticketsGrid">
            <div class="ticket-card" onclick="selectTicket('PostHog', '37252', 'Add a way to exclude properties from autocapture by name or CSS selector')">
                <div class="ticket-header">
                    <div class="issue-icon">!</div>
                    <span class="issue-number">#37252</span>
                </div>
                <div class="repo-name">PostHog/posthog</div>
                <div class="ticket-title">Add a way to exclude properties from autocapture by name or CSS selector</div>
                <div class="ticket-meta">
                    <span>Open</span>
                    <span>•</span>
                    <span>Feature Request</span>
                </div>
                <span class="label label-feature">enhancement</span>
            </div>

            <div class="ticket-card" onclick="selectTicket('PostHog', '23222', 'Feature flags not respecting local evaluation when offline')">
                <div class="ticket-header">
                    <div class="issue-icon">!</div>
                    <span class="issue-number">#23222</span>
                </div>
                <div class="repo-name">PostHog/posthog</div>
                <div class="ticket-title">Feature flags not respecting local evaluation when offline</div>
                <div class="ticket-meta">
                    <span>Open</span>
                    <span>•</span>
                    <span>Bug Report</span>
                </div>
                <span class="label label-bug">bug</span>
            </div>

            <div class="ticket-card" onclick="selectTicket('Supabase', '17941', 'Add support for custom auth providers in Supabase Auth')">
                <div class="ticket-header">
                    <div class="issue-icon">!</div>
                    <span class="issue-number">#17941</span>
                </div>
                <div class="repo-name">supabase/supabase</div>
                <div class="ticket-title">Add support for custom auth providers in Supabase Auth</div>
                <div class="ticket-meta">
                    <span>Open</span>
                    <span>•</span>
                    <span>Enhancement</span>
                </div>
                <span class="label label-enhancement">enhancement</span>
            </div>

            <div class="ticket-card custom-ticket-card" onclick="openLoginModal(event)">
                <div class="plus-icon">+</div>
                <div class="custom-ticket-title">Estimate Your Own Ticket</div>
                <div class="custom-ticket-subtitle">Paste any GitHub or Jira ticket URL to get instant effort estimation</div>
            </div>
        </div>

        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <div class="chat-title" id="chatTitle">Analyzing ticket...</div>
                <div class="chat-subtitle" id="chatSubtitle">Getting effort estimation</div>
            </div>
            <div class="chat-messages" id="chatMessages">
            </div>
            <div class="chat-input">
                <div class="input-wrapper">
                    <input type="text" id="userInput" placeholder="Ask follow-up questions about the estimation..." onkeypress="handleKeyPress(event)">
                    <button class="send-button" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>

        <div class="tech-note">
            <strong>Hysena</strong> embeds a language server into an MCP server to not guess an effort but traverse through the code and actually understand the effort.
        </div>
    </div>

    <script>
        let currentTicket = null;
        let messageCount = 0;

        function selectTicket(repo, issueNumber, title) {
            currentTicket = { repo, issueNumber, title };

            // Hide tickets, show chat
            document.getElementById('ticketsGrid').style.display = 'none';
            document.getElementById('chatContainer').style.display = 'block';
            document.getElementById('backButton').style.display = 'block';

            // Update chat header
            document.getElementById('chatTitle').textContent = `${repo} #${issueNumber}`;
            document.getElementById('chatSubtitle').textContent = title;

            // Clear previous messages
            document.getElementById('chatMessages').innerHTML = '';
            messageCount = 0;

            // Simulate AI analysis
            setTimeout(() => {
                addAIMessage("Analyzing the GitHub issue and traversing the codebase to understand the implementation requirements...");

                setTimeout(() => {
                    addAIMessage("I've analyzed the ticket and traversed through the relevant code sections. Based on the implementation complexity and required changes:", true);

                    setTimeout(() => {
                        const effortBox = `
                            <div class="effort-box">
                                <div class="effort-label">Estimated Engineering Effort</div>
                                <div class="effort-value">5 hours</div>
                            </div>
                        `;
                        document.getElementById('chatMessages').lastElementChild.querySelector('.message-text').innerHTML += effortBox;

                        setTimeout(() => {
                            addAIMessage("The estimation includes:\n• Code implementation: 3 hours\n• Testing and validation: 1.5 hours\n• Documentation updates: 0.5 hours\n\nKey areas affected: authentication module, configuration system, and API endpoints.");
                        }, 800);
                    }, 600);
                }, 1500);
            }, 500);
        }

        function addAIMessage(text, skipAnimation = false) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message message-ai';

            messageDiv.innerHTML = `
                <div class="avatar">H</div>
                <div class="message-content">
                    <div class="message-text">${text}</div>
                </div>
            `;

            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            messageCount++;
        }

        function addUserMessage(text) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message message-user';

            messageDiv.innerHTML = `
                <div class="message-content">
                    <div class="message-text" style="background: linear-gradient(135deg, #00b5eb, #e03466); color: white; margin-left: auto; max-width: 70%;">${text}</div>
                </div>
            `;

            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();

            if (message) {
                addUserMessage(message);
                input.value = '';

                // Simulate AI response
                setTimeout(() => {
                    const responses = [
                        "Based on your question, I can provide more details about the implementation approach and specific code sections that need modification.",
                        "Let me analyze that aspect more deeply by examining the related components and their dependencies.",
                        "I've checked the codebase for similar implementations. Here's what I found that could help with this ticket.",
                        "That's a good point. The effort estimation takes into account the testing requirements and potential edge cases."
                    ];

                    const response = responses[Math.floor(Math.random() * responses.length)];
                    addAIMessage(response);
                }, 1000);
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function showTickets() {
            document.getElementById('ticketsGrid').style.display = 'grid';
            document.getElementById('chatContainer').style.display = 'none';
            document.getElementById('backButton').style.display = 'none';
            currentTicket = null;
        }

        function openLoginModal(event) {
            if (event) event.preventDefault();
            document.getElementById('loginModal').classList.add('show');
        }

        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('show');
        }

        function handleLogin(event) {
            event.preventDefault();
            alert('Login functionality would be implemented here');
            closeLoginModal();
        }

        function handleSocialLogin(provider) {
            alert(`${provider} login would be implemented here`);
            closeLoginModal();
        }

        // Close modal when clicking outside
        document.getElementById('loginModal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeLoginModal();
            }
        });
    </script>
</body>
</html>